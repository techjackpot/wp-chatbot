(function(){var e={5056:function(e,t,s){"use strict";var i=s(7195),o=s(3449),n=s.n(o),a=s(7127),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"chat-bot-wrapper"},[t("beautiful-chat",{attrs:{participants:e.participants,onMessageWasSent:e.onMessageWasSent,messageList:e.messageList,newMessagesCount:e.newMessagesCount,isOpen:e.isChatOpen,close:e.closeChat,open:e.openChat,showTypingIndicator:e.showTypingIndicator,colors:e.colors,messageStyling:!1,title:"Upside Chat",alwaysScrollToBottom:"",disableUserListToggle:""},scopedSlots:e._u([{key:"user-avatar",fn:function({}){return[t("div")]}},{key:"text-message-body",fn:function({message:t}){return[e._v(" "+e._s(e._f("conversion")(t.data.text,e.status,t))+" ")]}}])})],1)},l=[],h={data(){return{status:{},log:{ip:"",sent:!1,enter_at:new Date,exit_at:new Date},prefillTimerID:null,prefills:[{id:"name",type:"name",filled:!1,label:"What is your name?"},{id:"email",type:"email",filled:!1,label:"What is your email? (We don't spam... I promise)"},{id:"zip",type:"zip",filled:!1,label:"What is your zip/postal code?"}],everTouched:!1,toLead:!1,touchWords:["quote"],positiveWords:["yeah","yes","yep"],negativeWords:["no","nah","none","nope"],promptTimeout:300,participants:[{id:"bot",name:"Support"}],messageList:[{type:"text",author:"bot",data:{text:"Hello, thank you for visiting. How may I help you?"}}],newMessagesCount:1,isChatOpen:!1,showTypingIndicator:"",colors:{header:{bg:"#FF8500",text:"#fff"},launcher:{bg:"#FF8500"},messageList:{bg:"#fff"},sentMessage:{bg:"#F44336",text:"#fff"},receivedMessage:{bg:"#eaeaea",text:"#222222"},userInput:{bg:"#fff",text:"#212121"},userList:{bg:"#fff",text:"#212121"}}}},methods:{checkPrefills(){const e=this.prefills.find((e=>!e.filled));e?(this.newMessagesCount=this.isChatOpen?this.newMessagesCount:this.newMessagesCount+1,this.addNewMessage({author:"bot",type:"text",data:{text:e.label},prefill_id:e.id},!1)):this.addNewMessage({type:"text",author:"bot",data:{text:"Additional questions?"},suggestions:["Yes","No"],options:{generic_followup:!0}},!1)},handlePreFills(e=!1){this.prefillTimerID&&clearTimeout(this.prefillTimerID),e&&(this.prefillTimerID=setTimeout((()=>{this.checkPrefills()}),1e3*this.promptTimeout))},receiveMessage(e,t){e.length>0&&(this.newMessagesCount=this.isChatOpen?this.newMessagesCount:this.newMessagesCount+1,this.addNewMessage({author:"bot",type:"text",data:{text:e},need_conversion:!0},!0),e.startsWith("Sorry, I don't know that as yet."),t.data.text.toLowerCase().includes("quote")&&this.checkPrefills())},requireReply(e){this.showTypingIndicator="...",this.$http.post("chatbot/ask",{question:e.data.text,type:"embed"}).then((e=>e.data.data)).then((t=>{const{answer:s}=t;this.receiveMessage(s,e)})).catch((e=>{console.log(e)})).finally((()=>{this.showTypingIndicator=""}))},addNewMessage(e,t=!1){this.messageList=[...this.messageList,e],this.handlePreFills(t)},getLasMessage(){return this.messageList[this.messageList.length-1]},onMessageWasSent(e){this.everTouched||(this.everTouched=!0),this.touchWords.some((t=>e.data.text.toLowerCase().includes(t)))&&(this.toLead=!0);const t=this.getLasMessage();if(t.options&&t.options.generic_followup){if(this.positiveWords.some((t=>e.data.text.toLowerCase()==t)))return void this.addNewMessage(e);if(this.negativeWords.some((t=>e.data.text.toLowerCase()==t)))return this.addNewMessage(e),void this.addNewMessage({type:"text",author:"bot",data:{text:"Thank you, I'm here if you need additional assistance"}},!1)}if(this.addNewMessage(e),t.prefill_id)return this.prefills.find((e=>e.id==t.prefill_id)).filled=!0,void this.checkPrefills();"me"==e.author&&this.requireReply(e)},openChat(){this.isChatOpen=!0,this.newMessagesCount=0},closeChat(){this.isChatOpen=!1},sendLog(){this.log.ip&&(this.log.exit_at=new Date,navigator.sendBeacon(`${this.$http.options.root}/chatbot/log`,new Blob([JSON.stringify({ip:this.log.ip,title:document.title,url:location.href,enter_at:this.log.enter_at,exit_at:this.log.exit_at,messages:this.messageList.map((e=>({author:e.author,text:e.data.text}))),toLead:this.toLead})],{type:"text/plain; charset=UTF-8"})),this.log.sent=!0)},handleSendLog(){this.everTouched&&!this.log.sent&&this.sendLog()}},filters:{conversion:function(e,t,s){if(!e)return"";if(!s.need_conversion)return e;if(!t.conversion||!t.conversion.from)return e;e=e.toString().replaceAll(t.conversion.from,t.conversion.to);var i=new RegExp(t.conversion.from,"g");return e.replace(i,t.conversion.to)}},mounted(){fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((e=>{this.log.ip=e.ip})),window.addEventListener("unload",this.handleSendLog),window.addEventListener("beforeunload",this.handleSendLog),this.$http.get("chatbot/status").then((e=>e.body)).then((e=>{this.status=e}))}},u=h,d=s(1001),c=(0,d.Z)(u,r,l,!1,null,null,null),f=c.exports;i["default"].use(n()),i["default"].config.productionTip=!1,i["default"].use(a.ZP);const p="https://iq.sixaxisllc.com";i["default"].http.options.root=p,document.getElementById("chatbot-widget")&&new i["default"]({render:e=>e(f)}).$mount("#chatbot-widget")},6608:function(){}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,i,o,n){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],o=e[u][1],n=e[u][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(r=!1,n<a&&(a=n));if(r){e.splice(u--,1);var h=o();void 0!==h&&(t=h)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[i,o,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,n,a=i[0],r=i[1],l=i[2],h=0;if(a.some((function(t){return 0!==e[t]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(l)var u=l(s)}for(t&&t(i);h<a.length;h++)n=a[h],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},i=self["webpackChunkvue_ui"]=self["webpackChunkvue_ui"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(5056)}));i=s.O(i)})();
//# sourceMappingURL=app.js.map